#!/bin/sh

selection=$(aplay -l | grep card | sed 's/card //' | rofi -dmenu -i -p "Soundcard: ")
test -z "$selection" && exit

id=$(echo $selection | cut -d ':' -f 1)
cat > ~/.asoundrc <<EOF
pcm.!default {
    type hw
    card $id
}

ctl.!default {
    type hw
    card $id
}
EOF

name=$(echo $selection | cut -d ' ' -f 2)
cat > ~/.profile.d/alsa.local << EOF
export ALSA_CARD="$name"
EOF
chmod +x ~/.profile.d/alsa.local
